<html>
<body>
  <head>

    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <!DOCTYPE html>
</head>  

<html>

<div id = "div1">test</div>

<form  action = "index.html" method = "POST">
<center><input   id="button1"  type="submit" value="Return to Purchase"/></center>
</form>

<script>
  
window.sessionStorage
  

//loads ajax on page start
$(function(){

////////

loadData();

////////
//  loadajax();
});


//checkout button pressed, so is here!
//data is here by sessionstorage
//send it to purge which calls template with data
function loadData() {
  
   
  alert("stringA");
alert(queryString);

 var string = "";
//////////////////////

let keys = Object.keys(sessionStorage);
var var1 = "hasntBeenHere";
for(let key of keys) {
  if(key == "session_userID")
  {
    continue;
  }
  var item = sessionStorage.getItem(key);
  string =  string + "id=" + key + "&quant=" + item + "&";
  var1 = "hasBeenHere";
  
}
if(var1 == "hasntBeenHere")
  {
    //alert("no!");
    window.location.href = "index.html";
    //return(1);
  }

//goes backwards and last entered writes over
var queryString = string.substring(0, string.length-1);

alert("stringB");
alert(queryString);

var url = "http://localhost:8080/template2";
//var queryString = "user_name=jerry&password=666666&user_name=marry&password=11111";



                    $.ajax({
                    type:"GET",
                    url:url,
                    data:queryString,
                    async:false,
                    success: function (data1) {
                      
                      $('#div1').html(data1);
                   
                    }
                });
}
  </script>



</body>
</html>