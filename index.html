<html>

  <head>

    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <!DOCTYPE html>
</head>  


<body>

  

  
  
    
  ///////////
  <!-- 
  <form
      id="form"
      enctype="multipart/form-data"
      action="http://localhost:8080/upload"
      method="POST"
    >
      <input class="input file-input" type="file2" name="file2" multiple />
      <button class="button" type="fix">Submit</button>
    </form>
  -->


  ///////////



<script>


let var1 = "apple1";

</script>



      <br><br><br>
      <!--display records-->
     
     
      <iframe id="upload_target" name="upload_target"  style="width:0;height:0;border:0px solid #fff;"></iframe> 	

      <form target = "upload_target"  enctype="multipart/form-data" method = "GET" action="http://localhost:8080/processSearch">
     
      <center><input   name = "search" type="text" id="search" name="search" value="search"/></center>
     
      
      
      
      <input   id="button2" type="submit" value="Get Inputs"/>
      </form>
    
      <input   id="button1" type="submit" value="Search Database"/>
      

      <!--upload-->
      <!--<input onclick = "uploadandProcessImage()" id="button2" type="button" value="upload"/>-->
      <!-- display image-->
      <!--<input onclick = "refresh()" id="button3" type="button" value="refresh"/>-->
      
      
      <!--not used right now-->
      <!--<input id="button5" type="button" value="try"/>-->
      

      <div id = "div1"><p> here</p> </div>
      
<script>

    //time = new Date($.now());
    //requestJSON = '{"Method":"GET","AppName":"Proline","ServiceURL":"http://localhost:8080/try","Properties":null,"Object":"","Timestamp":"'+time+'"}'
   
    //<input class="input file-input" type="file" name="file" id = "file" />


//try - not currently being  used
function refresh(){


  //var fileInput = document.getElementById('file');   
  //var filename = fileInput.files[0].name;

  //let url = `http://localhost:8080/getMessages?filename=${filename}`;
  //alert (url);
  var result = ""
     
    $(document).ready(function () {
      //$('#button5').click(function () {
          $.ajax({
              url: 'http://localhost:8080/getMessages',
              type: 'GET',
              dataType: 'json',
              contentType: "application/json; charset=utf-8",
              crossDomain: true,
              //success: function (data) {alert(data[0]);
              success: function (data){
               alert("success!");}
              
          });
      //});
  });

}
 


    $(document).ready(function () {
      $('#button1').click(function () {
          $.ajax({
              url: "http://localhost:8080/display",
              type: 'POST',
              dataType: 'html',
              contentType: "application/x-www-form-urlencoded",
              crossDomain: true,
              data: {post_data: 'hello world'},
              success: function (result) {
                
                alert(result);
                  $('#div1').html(result);
              }
          });
      });
  });


//button2
function uploadandProcessImage(){

  
 //     var result = ""
 //     
 //   $(document).ready(function () {
 //     //$('#button2').click(function () {
 //         $.ajax({
 //             url: "http://localhost:8080/upload",
 //             type: 'post',
 //             dataType: 'html',
 //             contentType: "application/x-www-form-urlencoded",
 //             crossDomain: true,
 //             data: {post_data: 'hello world'},
 //             success: function (result) {
 //               
 //               alert(result);
 //                 //$('#div1').html(result);
 //             }
 //         });
 //     //});
 // });

///////////////////////////////////
//https://stackoverflow.com/questions/25493706/ajax-upload-file-to-golang-server-with-content-type-multipart
var xhr = new XMLHttpRequest();
    //boundary=Math.random().toString().substr(2);


    var input = document.querySelector('input[type=file]'),
    file = input.files[0];

    
var formdata = new FormData();
formdata.append("file", file);
//xhr.open("POST", $id("upload").action, true);
xhr.open("POST", "localhost:8080/upload", true);
//xhr.setRequestHeader("content-type", "multipart/form-data; charset=utf-8; boundary=" + boundary);
xhr.send(formdata);

///////////////////////////////////

}
//button 3


/*
//https://stackoverflow.com/questions/37412187/golang-ajax-how-to-return-slices-or-struct-in-a-success-function
function refresh()
{

$(document).ready(function () {
      $('#button3').click(function () {
          $.ajax({
              url: "http://localhost:8080/refresh",
              type: 'post',
              dataType: 'html',
              contentType: 'application/x-www-form-urlencoded',
              crossDomain: true,
              data: {post_data: 'hello world'},
              success: function (data) {
                alert ("abc");
                  console.log(data);
                  $('#div1').html(data);
              }
          });
      });
  });



}
*/

/////////

</script>


    </body>
    </html>