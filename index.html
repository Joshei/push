<html>

  <head>

    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <!DOCTYPE html>
</head>  


<body>

  <script>
    window.sessionStorage

    //https://stackoverflow.com/questions/4187146/truncate-number-to-two-decimal-places-without-rounding
    
  

var var1 =1;
var var2 =1;
var var3 ;
var3 = var1 + var2;


</script>
    
      <input   id="button7"  type="button" value="checkout"/>
      <input   name = "search" type="text" id="search" name="search" placeholder= "apple1" value="apple1"/>
      <input   id="button6"  type="button" value="Search"/>


      <div id = "firstdiv" ></div>
      <div id ="buttons">
      <br><br><br>
     
     

      </div>

      
     
      
      <div id = "lastdiv"></div>
      
<script>

var array1 = [];
function insert(pid, quantLeft) {
    array1.push({
        pid: pid,
        quant: quant,
       
    });        
}








$(document).ready(function () {
      $('#button3').click(function () {


        
  //https://stackoverflow.com/questions/8951810/how-to-parse-json-data-with-jquery-javascript
  // https://stackoverflow.com/questions/5061310/jquery-returning-parsererror-for-ajax-request
    
        //example
       $.ajax({
              url: 'http://localhost:8080/getMessages',
              type: 'POST',
              dataType: 'json',
              contentType: "application/json",
              //data: { name: "John", age: 30, city: "New York" },
              data:{post_data: 'hello world'}, //JSON.stringify({ "name": name, "city": city }),
              crossDomain: true,
             
            success: function (data1) {
             // alert(data1);
              console.log(data1[2].Age);
              
              //alert("in here!!!");
              //alert(v)
              }
              });
          
         });

    });


  
  //template button press - display
    $(document).ready(function () {
      $('#button6').click(function () {
        var string = ""
        let keys = Object.keys(sessionStorage);

        var wasKeys = "no";
      for(let key of keys) {
  
       var item = sessionStorage.getItem(key);
       string =  string + "id=" + key + "&quant=" + item + "&";
  
       wasKeys = "yes";
        
      }
      var val1 = document.getElementById("search").value;
      if(wasKeys == "yes"){

        var querystring = string + "var=" + val1;
      }
      else
      {
        var querystring = "var=" + val1;
      }

        
        alert("querystring");
        alert(querystring);
        
       // alert(val1);
          $.ajax({
              url: "http://localhost:8080/display",
              type: 'GET',
              dataType: 'html',
              contentType: "application/x-www-form-urlencoded",
              crossDomain: true,
              data: querystring,
              success: function (result) {
                
                
                $('#buttons').html(result);
               
              
              
             
              
                }
          });
      });
  });


  

  //checkout button
  $(document).ready(function () {
      $('#button7').click(function () {
              //////////
              //calls purgehtml which calls template2.html - go
             alert("finalpage");
              window.location.href = "finalPage.html";
              
              
                });  
              });
              ////////////


//not used...
function uploadandProcessImage(){


///////////////////////////////////
//https://stackoverflow.com/questions/25493706/ajax-upload-file-to-golang-server-with-content-type-multipart
var xhr = new XMLHttpRequest();
    //boundary=Math.random().toString().substr(2);


    var input = document.querySelector('input[type=file]'),
    file = input.files[0];

    
var formdata = new FormData();
formdata.append("file", file);
xhr.open("POST", "localhost:8080/upload", true);
//xhr.setRequestHeader("content-type", "multipart/form-data; charset=utf-8; boundary=" + boundary);
xhr.send(formdata);

///////////////////////////////////

}


</script>


    </body>
    </html>